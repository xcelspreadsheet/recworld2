(this.webpackJsonprecworld=this.webpackJsonprecworld||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/venus.19786740.glb"},26:function(e,t,a){e.exports=a(27)},27:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(7),s=a(10),i=a(14),o=a(11),l=a(12),c=a(0),u=a.n(c),d=a(21),h=a.n(d),m=a(2),p=a(22),v=a(6),b=a.n(v),f=a(4),g=a.n(f),k=(a(42),a(45),a(46),a(24)),y=a.n(k);if("ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)try{for(var E in document.styleSheets){var w=document.styleSheets[E];if(w.rules)for(var C=w.rules.length-1;C>=0;C--)w.rules[C].selectorText&&w.rules[C].selectorText.match(":hover")&&w.deleteRule(C)}}catch(A){}b.a.initializeApp({apiKey:"AIzaSyDiGzl-w4zQsJQG9c-7UsL0t9-CF9RnOUE",authDomain:"recworld-abde0.firebaseapp.com",databaseURL:"https://recworld-abde0.firebaseio.com",projectId:"recworld-abde0",storageBucket:"recworld-abde0.appspot.com",messagingSenderId:"301870437630",appId:"1:301870437630:web:c3eb9472d89f2ab1a101af"});var x=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=1e-4,t=new m.ab,a=new m.Q(50,window.innerWidth/window.innerHeight,.1,1e3),n=new m.nb({alpha:!0});n.setClearColor(16777215,0),n.shadowMap.enabled=!0,n.shadowMapSoft=!0,n.shadowMap.type=m.P,n.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(n.domElement);var r=new m.R(200,200,200),s=new m.bb({color:6710886,side:m.j});s.opacity=.2;var i=new m.E(r,s);i.position.z=-5,i.receiveShadow=!0,t.add(i),a.position.z=7.5;var o=new p.a,l=new m.fb(16119285);l.position.set(-.5,-.5,10),l.intensity=1,l.castShadow=!0;l.shadow.mapSize.width=3072,l.shadow.mapSize.height=3072;l.shadow.camera.left=-10,l.shadow.camera.right=10,l.shadow.camera.top=10,l.shadow.camera.bottom=-10,l.shadow.radius=3,t.add(l);var c=new m.a(16119285);c.intensity=.25,t.add(c),a.add(c);var u=[],d=[];o.load(y.a,(function(r){console.log("loaded scene"),t.add(r.scene),t.traverse((function(e){console.log(e.name)})),r.scene.position.z=-1e3;var s=t.getObjectByName("cup"),i=t.getObjectByName("chandelier"),o=t.getObjectByName("Circle002");s.castShadow=!0,i.castShadow=!0,o.castShadow=!0,u.push(i),u.push(i),u.push(s),u.push(s),u.push(s),u.push(o),u.push(o),u.push(o),u.push(o),u.push(o);var l=[-3,-3.2,-3.1,3,3.2,3.1],c=[2,3,5],h=!0;window.onblur=function(){h=!1},window.onfocus=function(){h=!0},[-5,-7,-9,-11].forEach((function(e){if(h){var n=u[Math.floor(Math.random()*u.length)].clone();t.add(n),n.position.x=l[Math.floor(Math.random()*l.length)]*(.96*a.aspect),n.position.y=e,d.push(n)}})),function e(){if(h&&(!(d.length>0)||d.slice(-1)[0].position.y>-8)){var n=u[Math.floor(Math.random()*u.length)].clone();t.add(n),n.position.x=l[Math.floor(Math.random()*l.length)]*a.aspect,n.position.y=-8-c[Math.floor(Math.random()*c.length)],d.push(n)}setTimeout(e,3e3)}();!function r(){requestAnimationFrame(r),d.forEach((function(a){a.rotation.y+=.005+.01*e,a.rotation.x+=.001,a.position.y+=.005,a.position.x+=a.position.x/15e3,a.position.y>10&&t.remove(a)})),n.render(t,a)}()}),void 0,(function(e){console.error(e)}));var h=function(e){var t,a,n,r,s=(e=e||{}).delay||50;function i(){t=null,r=0}return i(),function(){return a=window.scrollY,null!=t&&(r=a-t),t=a,clearTimeout(n),n=setTimeout(i,s),r}}();window.onscroll=function(){!function(){var t=document.body.scrollTop||document.documentElement.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight,r=t/n;a.position.y=0-5*r,l.position.y=0-5*r,e=Math.abs(h())}()};var v=null;g()(window).resize((function(){null!=v&&window.clearTimeout(v),v=window.setTimeout((function(){a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)}),200)}));!function(e){var t;e&&"function"===typeof e&&window.addEventListener("scroll",(function(a){window.clearTimeout(t),t=setTimeout((function(){e()}),66)}),!1)}((function(){e=0}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{ref:function(t){return e.mount=t}}," ")}}]),a}(c.Component),S=(b.a.database(),c.Component,function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={recs:[],currenttitle:"",lookingatlikes:!1,mountcount:0},e.updateRecs=e.updateRecs.bind(Object(r.a)(e)),e}return Object(i.a)(a,[{key:"updateRecs",value:function(e){this.setState({mountcount:1})}},{key:"componentDidMount",value:function(){}},{key:"removeRec",value:function(e){var t=this.state.recs.filter((function(t,a,n){return t.key!==e}));this.setState({recs:t})}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"reclist"},this.state.recs.map((function(t){return u.a.createElement(T,{lookingatlikes:e.state.lookingatlikes,removeRec:e.removeRec.bind(e),creator:t.creator,currentuid:e.props.currentuid,currentusername:e.props.currentusername,index:t.index,key:t.key,fbid:t.key,type:t.type,title:t.title,link:t.link,description:t.description})})),0===this.state.recs.length?u.a.createElement("div",{className:"nothing"},u.a.createElement("h1",null,0===this.state.mountcount&&this.props.mainreclist?"one second":"nothing here")):"")}}]),a}(c.Component)),N=["movie","tv show","game","location","spiritual practice"],O={book:"local_library",movie:"local_movies","free pdf":"description",show:"personal_video","art moment":"ring_volume","ambient sound":"hearing",tweet:"subtitles","day bev":"trending_up","night bev":"trending_down",song:"radio",recipe:"rowing","web vid":"memory",fundraiser:"extension",ritual:"brightness_2","spiritual practice":"bubble_chart",furniture:"airline_seat_legroom_reduced",spot:"terrain",game:"healing","personal sex act":"waves","whitney h. single":"live_help"};c.Component,u.a.Component;function M(e,t){e.removeClass(t);var a=e.clone(!0);e.before(a),e.remove()}var T=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={},e.like=e.like.bind(Object(r.a)(e)),e}return Object(i.a)(a,[{key:"like",value:function(e){if(!g()(e.target).hasClass("cardtitle")&&!g()(e.target).hasClass("deleterecbutton")){var t=this,a=e.currentTarget;g()(a).removeClass("cardpressed"),a.offsetWidth,g()(a).addClass("cardpressed"),M(g()(a).find(".iloveittext"),"iloveittext-pressed"),M(g()(a).find(".iloveittextbackground"),"iloveittextbackround-pressed");var n=g()(a).find(".iloveittext");g()(n).removeClass("iloveittext-pressed"),n.offsetWidth,g()(n).addClass("iloveittext-pressed");var r=g()(a).find(".iloveittextbackground");g()(r).removeClass("iloveittextbackround-pressed"),r.offsetWidth,g()(r).addClass("iloveittextbackround-pressed"),b.a.database().ref("/users/"+this.props.currentuid+"/likes/"+this.props.fbid).set(!0),b.a.database().ref("/publicrecs/"+this.props.fbid+"/rating").once("value").then((function(e){console.log(e.val());var a=e.val();t.props.fbid&&b.a.database().ref("/publicrecs/"+t.props.fbid).update({rating:a+1})}))}}},{key:"removeRec",value:function(){var e=this.props.fbid;this.props.removeRec(e),b.a.database().ref("/publicrecs/").child(e).remove()}},{key:"removeLike",value:function(){var e=this.props.fbid;this.props.removeRec(e),b.a.database().ref("users/"+this.props.currentuid+"/likes/").child(e).remove()}},{key:"render",value:function(){var e=this.props.link?{href:this.props.link}:{};return u.a.createElement("div",{className:"card",onClick:this.like.bind(this)},u.a.createElement("div",{className:"row"},this.props.lookingatlikes?u.a.createElement("button",{onClick:this.removeLike.bind(this),className:"deleterecbutton"},"Over it"):"",this.props.currentusername&&this.props.currentuid===this.props.creator&&!this.props.lookingatlikes?u.a.createElement("button",{onClick:this.removeRec.bind(this),className:"deleterecbutton"},"delete"):"",u.a.createElement("div",{className:"col-sm-8"},u.a.createElement("h1",{style:{color:"black"}},u.a.createElement("a",Object.assign({className:"cardtitle"},e),this.props.title)),u.a.createElement("h2",{className:"subtitle"},u.a.createElement("span",{className:"material-icons"},O[this.props.type]),this.props.type))),u.a.createElement("div",{className:"row"},u.a.createElement("p",null,this.props.description)),u.a.createElement("div",{className:"iloveittext"},"i love it!"),u.a.createElement("div",{className:"iloveittextbackground"}),this.props.index?u.a.createElement("div",{className:"indexwrapper"},u.a.createElement("div",{className:"indexdiv"},this.props.index)):u.a.createElement("div",null))}}]),a}(c.Component),j=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={title:"",link:"",linkvalid:!0,type:"",description:"",buttonColor:"lightgray"},e.handleChange=e.handleChange.bind(Object(r.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(r.a)(e)),e.radioChange=e.radioChange.bind(Object(r.a)(e)),e.checkLink=e.checkLink.bind(Object(r.a)(e)),e.handleCancel=e.handleCancel.bind(Object(r.a)(e)),e}return Object(i.a)(a,[{key:"radioChange",value:function(e){this.setState({type:e.currentTarget.value})}},{key:"checkLink",value:function(e){}},{key:"handleChange",value:function(e){this.setState(Object(n.a)({},e.target.name,e.target.value)),"link"==e.target.name&&""!==e.target.value?!function(e){if(/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e))return console.log("linkvalid"),!0;return console.log("link not valid"),!1}(e.target.value)?(this.setState({linkvalid:!1}),console.log(this.linkvalid)):(console.log(this.linkvalid),this.setState({linkvalid:!0})):"link"==e.target.name&&""===e.target.value&&this.setState({linkvalid:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t="";b.a.auth().currentUser.displayName&&(t=b.a.auth().currentUser.displayName);var a=b.a.database().ref("/publicrecs/"),n={title:this.state.title,link:this.state.linkvalid?this.state.link:"",creator:b.a.auth().currentUser.uid,rating:0,description:this.state.description,type:this.state.type,creatorusername:t};a.push(n),this.setState({title:"",link:"",description:"",type:""}),this.props.addModalSuccess()}},{key:"handleCancel",value:function(e){e.preventDefault(),this.setState({title:"",link:"",description:"",type:""}),this.props.addModalHide()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,u.a.createElement("section",{className:"add-item"},u.a.createElement("form",null,u.a.createElement("h2",null,"NAME"),u.a.createElement("span",null,u.a.createElement("input",{type:"text",name:"title",placeholder:"title",onChange:this.handleChange,value:this.state.title})),u.a.createElement("h2",null,"LINK?    ",u.a.createElement("span",{style:{color:this.state.linkvalid?"white":"lightgray"}},"   THIS LINK WON't WORK, but that's ok.")),u.a.createElement("input",{className:"linkinput",type:"text",name:"link",placeholder:"link",onChange:this.handleChange,value:this.state.link}),u.a.createElement("div",{className:"typeselector"},Object.keys(O).map((function(t){return u.a.createElement("div",{className:"typeradio"},u.a.createElement("input",{id:t,checked:e.state.type===t,type:"radio",key:t,value:t,onChange:e.radioChange.bind(e)}),u.a.createElement("label",{for:t,class:"radio",className:"button"},u.a.createElement("span",{className:"material-icons"},O[t])," ",t.toUpperCase()))}))),u.a.createElement("h2",null,"WHAT'S THE DEAL"),u.a.createElement("textarea",{name:"description",onChange:this.handleChange,value:this.state.description}),u.a.createElement("div",{className:"modalbuttons"},u.a.createElement("button",{onClick:this.handleCancel,key:"cancel button",className:"cancelbutton"},"cancel"),u.a.createElement("button",{onClick:this.handleSubmit,className:"submitbutton "+(this.state.title.trim()&&this.state.type.trim()&&this.state.description.trim()?"submitshake":"")},"REC."))))," ")}}]),a}(c.Component),R=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={username:"",password:"",loginregtext:"i'm new",errortext:"",error:!1,usernameexists:!1,tryingtologin:!1},e.handleChange=e.handleChange.bind(Object(r.a)(e)),e.handlePassword=e.handlePassword.bind(Object(r.a)(e)),e}return Object(i.a)(a,[{key:"handleChange",value:function(e){var t;console.log("handling chnage");var a=this;a.setState((t={},Object(n.a)(t,e.target.name,e.target.value),Object(n.a)(t,"errortext",""),t),(function(){b.a.database().ref("/users/").orderByChild("username").equalTo(this.state.username).once("value").then((function(e){var t=[];e.forEach((function(e){var a=e.val();console.log(a),t.push(a)})),0===t.length?a.setState({loginregtext:"i'm new",usernameexists:!1}):a.setState({loginregtext:"login",usernameexists:!0})}))}))}},{key:"handleRegisterLogin",value:function(e){var t=this,a=this.state.username,n=this.state.password;if(this.setState({tryingtologin:!0}),this.state.usernameexists)console.log("username does exist, loggin in"),b.a.database().ref("/users/").orderByChild("username").equalTo(this.state.username).once("value").then((function(e){console.log("checking username against database");var a="";e.forEach((function(e){console.log(e.key),console.log(e.value),a=e.key})),console.log(a),b.a.auth().signInWithEmailAndPassword(a+"@recworld.app",n).then((function(e){console.log("login success"),console.log(e),t.props.signIn(),t.setState({username:"",password:"",loginregtext:"i'm new",errortext:"",error:!1,usernameexists:!1,tryingtologin:!1})})).catch((function(e){e.code;var a=e.message;t.setState({errortext:a})}))}));else{e.preventDefault(),b.a.auth().currentUser.updateProfile({displayName:a}),b.a.database().ref("users/"+b.a.auth().currentUser.uid).set({username:a});var r=b.a.auth.EmailAuthProvider.credential(b.a.auth().currentUser.uid+"@recworld.app",n);b.a.auth().currentUser.linkWithCredential(r).then((function(e){var n=e.user;console.log("Anonymous account successfully upgraded",n),t.props.register(a),t.setState({username:"",password:"",loginregtext:"i'm new",errortext:"",error:!1,usernameexists:!1,tryingtologin:!1})})).catch((function(e){t.setState({errortext:e.message}),console.log("enteredusername"),console.log("Error upgrading anonymous account",e)}))}}},{key:"handlePassword",value:function(e){var t;this.setState((t={},Object(n.a)(t,e.target.name,e.target.value),Object(n.a)(t,"errortext",""),t))}},{key:"handleCancel",value:function(){this.setState({username:"",password:"",loginregtext:"i'm new",errortext:"",error:!1,usernameexists:!1,tryingtologin:!1}),this.props.closeloginform()}},{key:"render",value:function(){return u.a.createElement("div",{className:"loginform"},u.a.createElement("h2",null,"username"),u.a.createElement("input",{type:"text",name:"username",onBlur:this.handleChange,onChange:this.handleChange,value:this.state.username}),u.a.createElement("h2",null,"password"),u.a.createElement("input",{className:"passwordinput",onChange:this.handlePassword,type:"text",name:"password",value:this.state.password}),u.a.createElement("h2",null,u.a.createElement("span",null," ",this.state.errortext)),u.a.createElement("div",{className:"modalbuttons"},u.a.createElement("button",{onClick:this.handleCancel.bind(this),key:"cancel button",className:"cancelbutton"},"cancel"),u.a.createElement("button",{onClick:this.handleRegisterLogin.bind(this),className:"submitbutton "+(this.state.username.trim()&&this.state.password.trim()?"submitshake":"")},u.a.createElement("span",{style:{display:this.tryingtologin?"inherit":"none"},className:"material-icons rotating"},"work"),this.state.loginregtext)))}}]),a}(c.Component),L=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this)).state={currentupdatemethod:"mine"},n.recList=u.a.createRef(),n}return Object(i.a)(a,[{key:"refreshMe",value:function(){"mine"===this.state.currentupdatemethod?this.getMyRecs():"mylikes"===this.state.currentupdatemethod&&this.getMyLikes(),g()("html, body").animate({scrollTop:0},100)}},{key:"getMyRecs",value:function(){var e=this;this.setState({currentupdatemethod:"mine"}),b.a.database().ref("/publicrecs/").orderByChild("creator").equalTo(this.props.currentuid).once("value").then((function(t){var a=[];t.forEach((function(e){var t=e.key;console.log(t);var n=e.val();console.log(n),n.key=t,a.push(n)})),a.reverse(),"all"!==e.props.filterset&&(a=a.filter((function(t,a,n){return t.type===e.props.filterset}))),e.recList.current.setState({recs:a,lookingatlikes:!1})}))}},{key:"getMyLikes",value:function(){var e=this;this.setState({currentupdatemethod:"mylikes"}),b.a.database().ref("/users/"+this.props.currentuid+"/likes").once("value").then((function(t){console.log("getting my likes"),console.log(t);var a=[];t.forEach((function(e){var t=e.key;console.log(t);var n=e.val();n&&a.push(t),console.log(n)})),console.log(a);var n=a.map((function(e){return b.a.database().ref("/publicrecs/").child(e).once("value")}));Promise.all(n).then((function(t){var a=[];t.forEach((function(e){var t=e.key;console.log(t);var n=e.val();n&&(n.key=t,console.log(n),a.push(n))})),a.reverse(),"all"!==e.props.filterset&&(a=a.filter((function(t,a,n){return t.type===e.props.filterset}))),e.recList.current.setState({recs:a,lookingatlikes:!0})}))}))}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"metoolbarheader"},u.a.createElement("div",{className:"metoolbarheader"},u.a.createElement("div",{className:"userpill"},u.a.createElement("h1",null,this.props.currentusername)),u.a.createElement("div",null,u.a.createElement("button",{onClick:this.props.signOut,className:"logoutbutton"},"logout")),u.a.createElement("div",{className:"likespacer"}),u.a.createElement("div",{className:"metoolbarbuttons"},u.a.createElement("button",{onClick:this.getMyRecs.bind(this),className:"myrecsbutton "+("mine"===this.state.currentupdatemethod?"filterbuttonselected":"")},u.a.createElement("span",{className:"material-icons"},"dynamic_feed"),"My recs"),u.a.createElement("button",{onClick:this.getMyLikes.bind(this),className:"myrecsbutton "+("mylikes"===this.state.currentupdatemethod?"filterbuttonselected":"")},u.a.createElement("span",{className:"material-icons"},"bookmarks"),"recs i loved")))),u.a.createElement("div",{className:"likereclist"},u.a.createElement(S,{currentuid:this.props.currentuid,currentusername:this.props.currentusername,ref:this.recList,mainreclist:!1})))}}]),a}(c.Component),H=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this)).state={currentusername:"",currentuid:"",currentrecs:[],rodaldialogstate:"",rodalmaskstate:"",filterset:"all",currentupdatemethod:"new",filtertoolbaropen:!1,loginformopen:!1,loginbuttonvisible:!1},n.meToolbar=u.a.createRef(),n.recList=u.a.createRef(),n.getCurrentRecs=n.getCurrentRecs.bind(Object(r.a)(n)),n.getTrendingRecs=n.getTrendingRecs.bind(Object(r.a)(n)),n.addModalShow=n.addModalShow.bind(Object(r.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCurrentRecs("all");var e=this;b.a.auth().onAuthStateChanged((function(t){if(t){console.log("AUTH STATE CHANGED"),console.log(t);t.isAnonymous;var a=t.uid,n=t.displayName;e.setState({currentusername:n,currentuid:a},(function(){this.meToolbar.current.refreshMe()}))}else b.a.auth().signInAnonymously().catch((function(e){e.code;var t=e.message;console.log(t)}))}))}},{key:"filterToolbarShow",value:function(){this.setState({filtertoolbaropen:!0})}},{key:"filterToolbarClose",value:function(){this.setState({filtertoolbaropen:!1})}},{key:"addModalShow",value:function(){var e=g()(".backgroundtext");e.removeClass("flicker");var t=e.clone(!0);e.text("What's your rec?"),e.before(t),e.remove(),this.setState({rodaldialogstate:"rodal-appear",rodalmaskstate:"rodalmask-appear"}),g()(".backgroundtext").text("What's your rec?"),g()(".backgroundtext").addClass("flicker")}},{key:"addModalHide",value:function(){this.setState({rodaldialogstate:"rodal-cancel",rodalmaskstate:"rodalmask-disappear"})}},{key:"addModalSuccess",value:function(){var e=g()(".backgroundtext");e.removeClass("flicker");var t=e.clone(!0);e.text("Thank you!"),e.before(t),e.remove(),g()(".backgroundtext").text("Thank you!"),g()(".backgroundtext").addClass("flickeronce"),this.setState({rodaldialogstate:"rodal-disappear",rodalmaskstate:"rodalmask-disappear"}),"me"===this.state.currentupdatemethod?this.meToolbar.current.refreshMe():this.getCurrentRecs()}},{key:"setButtonState",value:function(e){g()(".toolbarbutton").removeClass("selected"),g()(e).addClass("selected")}},{key:"filterChange",value:function(e){var t=e.currentTarget.value;this.setState({filtertoolbaropen:!1,filterset:t},(function(){"new"==this.state.currentupdatemethod?this.getCurrentRecs():"trending"==this.state.currentupdatemethod?this.getTrendingRecs():"me"==this.state.currentupdatemethod&&this.meToolbar.current.refreshMe(),this.setState({filtertoolbaropen:!1})}))}},{key:"getTrendingRecs",value:function(){this.setButtonState(g()(".trendingbutton")),this.setState({currentupdatemethod:"trending"});var e=this,t=e.state.filterset;"all"==t?b.a.database().ref("/publicrecs/").orderByChild("rating").limitToLast(100).once("value").then((function(t){console.log(t);var a=[];t.forEach((function(e){var t=e.key;console.log(t);var n=e.val();console.log(n),n.key=t,a.push(n)})),a.reverse();var n=1;a.forEach((function(e){e.index=n,n+=1})),e.recList.current.setState({recs:a}),g()("html, body").animate({scrollTop:0},100)})):b.a.database().ref("/publicrecs/").orderByChild("type").equalTo(t).limitToLast(100).once("value").then((function(t){var a=[];t.forEach((function(e){var t=e.key;console.log(t);var n=e.val();console.log(n),n.key=t,a.push(n)})),a.sort((function(e,t){return t.rating-e.rating})),console.log(a);var n=1;a.forEach((function(e){e.index=n,n+=1})),e.recList.current.setState({recs:a}),g()("html, body").animate({scrollTop:0},100)}))}},{key:"getCurrentRecs",value:function(){this.setButtonState(g()(".newbutton"));var e=this;e.setState({currentupdatemethod:"new"});var t=e.state.filterset;"all"==t?b.a.database().ref("/publicrecs/").limitToLast(100).once("value").then((function(t){console.log(t);var a=[];t.forEach((function(e){var t=e.key;console.log(t);var n=e.val();console.log(n),n.key=t,a.push(n)})),a.reverse(),e.recList.current.setState({recs:a}),g()("html, body").animate({scrollTop:0},100),e.recList.current.updateRecs()})):b.a.database().ref("/publicrecs/").orderByChild("type").equalTo(t).limitToLast(100).once("value").then((function(t){console.log(t);var a=[];t.forEach((function(e){var t=e.key;console.log(t);var n=e.val();console.log(n),n.key=t,a.push(n)})),a.reverse(),e.recList.current.setState({recs:a}),g()("html, body").animate({scrollTop:0},100)}))}},{key:"register",value:function(e){this.setState({currentusername:e,loginformopen:!1}),this.getMyRecs();var t=g()(".backgroundtext");t.removeClass("flicker");var a=t.clone(!0);t.text("you're registered!"),t.before(a),t.remove(),g()(".backgroundtext").text("You're in!"),g()(".backgroundtext").addClass("flicker")}},{key:"signIn",value:function(){this.setState({loginformopen:!1}),this.getMyRecs();var e=g()(".backgroundtext");e.removeClass("flicker");var t=e.clone(!0);e.text("hello!"),e.before(t),e.remove(),g()(".backgroundtext").text("Hello!"),g()(".backgroundtext").addClass("flicker")}},{key:"signOut",value:function(){var e=this;e.setState({currentuid:"",currentusername:"",loginformopen:!1}),b.a.auth().signOut().then((function(){e.setState({currentuid:"",currentusername:""})})).catch((function(e){})),this.getCurrentRecs();var t=g()(".backgroundtext");t.removeClass("flicker");var a=t.clone(!0);t.text("bye bye!"),t.before(a),t.remove(),g()(".backgroundtext").text("bye bye!"),g()(".backgroundtext").addClass("flicker")}},{key:"toggleFilterToobar",value:function(){var e=!this.state.filtertoolbaropen;this.setState({filtertoolbaropen:e})}},{key:"loginFormShow",value:function(){this.setState({loginformopen:!0})}},{key:"loginFormHide",value:function(){this.setState({loginformopen:!1})}},{key:"getMyRecs",value:function(){this.setButtonState(g()(".mebutton"));this.setState({currentupdatemethod:"me"}),this.state.currentusername&&this.meToolbar.current.refreshMe()}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,"            ",u.a.createElement("div",{className:"backgroundtext"},"WHAT'S YOUR REC?"),u.a.createElement("div",{class:"title"},u.a.createElement("h1",null,"REC WORLD"),u.a.createElement("div",{className:"toolbar"},u.a.createElement("button",{className:"toolbarbutton newbutton",onClick:this.getCurrentRecs},u.a.createElement("span",{className:"material-icons"},"line_weight"),"new"),u.a.createElement("button",{className:"toolbarbutton trendingbutton",onClick:this.getTrendingRecs},u.a.createElement("span",{className:"material-icons"},"equalizer"),"LOVED"),u.a.createElement("button",{style:{display:this.state.currentusername?"":"none"},className:"toolbarbutton mebutton",onClick:this.getMyRecs.bind(this)},u.a.createElement("span",{className:"material-icons"},"apps"),"me"),u.a.createElement("button",{style:{display:this.state.currentusername?"none":""},onMouseOver:this.loginFormShow.bind(this),onMouseOut:this.loginFormHide.bind(this),className:"toolbarbutton loginbutton"},u.a.createElement("span",{className:"material-icons"},"apps"),"me"),u.a.createElement("button",{onMouseOver:this.filterToolbarShow.bind(this),onMouseOut:this.filterToolbarClose.bind(this),className:"toolbarbutton filterbutton "+("all"!==this.state.filterset?"filterbuttonselected":"")},u.a.createElement("span",{className:"material-icons"},"line_style"),"filter","all"!==this.state.filterset&&window.innerWidth>430?": "+this.state.filterset:"")),u.a.createElement("div",{style:{pointerEvents:this.state.currentusername?"none":"all"},onMouseOver:this.loginFormShow.bind(this),onMouseOut:this.loginFormHide.bind(this),className:"filterselector "+(this.state.loginformopen?"filterhover":"")},u.a.createElement(R,{closeloginform:this.loginFormHide.bind(this),register:this.register.bind(this),signIn:this.signIn.bind(this)})),u.a.createElement("div",{onMouseOver:this.filterToolbarShow.bind(this),onMouseOut:this.filterToolbarClose.bind(this),className:"filterselector "+(this.state.filtertoolbaropen?"filterhover":"")},u.a.createElement("button",{value:"all",onClick:this.filterChange.bind(this),className:"all"===this.state.filterset?"clearbuttonall":""},"ALL"),Object.keys(O).map((function(t){return u.a.createElement("button",{className:e.state.filterset===t?"clearbutton":"",id:t+"filterbutton",key:t+"filterbutton",value:t,onClick:e.filterChange.bind(e)},u.a.createElement("span",{className:"material-icons"},O[t])," ",t.toUpperCase())})),u.a.createElement("div",{className:"filterbuffer"}))),u.a.createElement("div",{class:"title hidden"},u.a.createElement("h1",null,"REC WORLD")),u.a.createElement("div",{className:"title"},u.a.createElement("div",{className:"container"})),u.a.createElement("div",null,u.a.createElement("div",{className:"metoolbarparent",style:{width:"me"===this.state.currentupdatemethod?"auto":"0px",height:"me"===this.state.currentupdatemethod?"auto":"0px",overflow:"me"===this.state.currentupdatemethod?"auto":"hidden"}},u.a.createElement(L,{filterset:this.state.filterset,ref:this.meToolbar,signOut:this.signOut.bind(this),currentuid:this.state.currentuid,currentusername:this.state.currentusername})),u.a.createElement("div",{className:"mainreclistcontainer",style:{width:"me"===this.state.currentupdatemethod?"0px":"auto",height:"me"===this.state.currentupdatemethod?"0px":"auto",overflow:"me"===this.state.currentupdatemethod?"hidden":"auto"}},u.a.createElement(S,{currentuid:this.state.currentuid,currentusername:this.state.currentusername,ref:this.recList,mainreclist:!0}),"  "),u.a.createElement("div",{className:"threejs"},u.a.createElement(x,null))),u.a.createElement("div",{className:"addform"},u.a.createElement("div",{className:"rodal-mask "+this.state.rodalmaskstate,onClick:this.addModalHide.bind(this)}),u.a.createElement("div",{className:"rodal-dialog "+this.state.rodaldialogstate},u.a.createElement(j,{addModalHide:this.addModalHide.bind(this),addModalSuccess:this.addModalSuccess.bind(this),getCurrentRecs:this.getCurrentRecs.bind(this)}))),u.a.createElement("button",{className:"addbutton",onClick:this.addModalShow},u.a.createElement("div",{className:"addbuttontext"},"+")))}}]),a}(c.Component),W=document.getElementById("root");h.a.render(u.a.createElement(H,null),W)},46:function(e,t,a){}},[[26,1,2]]]);
//# sourceMappingURL=main.34272f42.chunk.js.map