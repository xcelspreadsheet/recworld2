{"version":3,"sources":["models/venus.glb","index.js"],"names":["module","exports","document","documentElement","navigator","maxTouchPoints","msMaxTouchPoints","si","styleSheets","styleSheet","rules","ri","length","selectorText","match","deleteRule","ex","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ThreeJS","rotationmodifier","scene","THREE","camera","window","innerWidth","innerHeight","renderer","alpha","setClearColor","shadowMap","enabled","shadowMapSoft","type","setSize","body","appendChild","domElement","geometry","material","color","side","opacity","plane","position","z","receiveShadow","add","loader","GLTFLoader","spotLight","set","intensity","castShadow","shadow","mapSize","width","height","left","right","top","bottom","radius","light2","originalobjectsfullrotate","animatableobjectsfullrotate","load","scenedata","gltf","console","log","traverse","object","name","cup","getObjectByName","chandelier","candelabra","push","randompositions","randomypositions","window_focus","onblur","onfocus","forEach","yposition","objectclone","Math","floor","random","clone","x","aspect","y","createNewFullRotate","slice","setTimeout","fullRotate","requestAnimationFrame","rotation","remove","render","undefined","error","checkScrollSpeed","settings","lastPos","newPos","timer","delta","delay","clear","scrollY","clearTimeout","onscroll","winScroll","scrollTop","scrollHeight","clientHeight","scrolled","abs","scrollCam","globalResizeTimer","$","resize","updateProjectionMatrix","callback","isScrolling","addEventListener","event","scrollStop","ref","mount","Component","mountcount","database","RecList","state","recs","currenttitle","updateRecs","bind","this","setState","keyToRemove","newarray","filter","value","index","arr","className","map","rec","RecUnit","removeRec","creator","currentuid","props","currentusername","key","fbid","title","link","description","types","typedict","React","readdClass","el","classname","removeClass","newone","before","like","e","target","hasClass","component","element","currentTarget","offsetWidth","addClass","find","iloveittext","iloveittextbackground","once","then","snapshot","val","rating","update","child","hrefattr","href","onClick","style","Form","linkvalid","buttonColor","handleChange","handleSubmit","radioChange","checkLink","handleCancel","url","test","validate","preventDefault","itemsRef","item","auth","currentUser","uid","addModalSuccess","addModalHide","placeholder","onChange","Object","keys","typeval","id","checked","for","class","toUpperCase","trim","LoginForm","username","password","loginregtext","errortext","usernameexists","handlePassword","orderByChild","equalTo","children","childSnapshot","childData","enteredusername","enteredpassword","signInWithEmailAndPassword","result","signIn","catch","code","errorMessage","message","updateProfile","displayName","credential","EmailAuthProvider","linkWithCredential","usercred","user","register","closeloginform","handleRegisterLogin","MeToolbar","currentupdatemethod","recList","createRef","getMyRecs","limitToLast","reclist","childKey","current","signOut","App","currentrecs","rodaldialogstate","rodalmaskstate","filterset","filtertoolbaropen","loginformopen","loginbuttonvisible","meToolbar","getCurrentRecs","getTrendingRecs","addModalShow","onAuthStateChanged","isAnonymous","displayname","refreshMe","signInAnonymously","text","selectedbutton","targetval","setButtonState","reverse","animate","sort","first","second","toolbarval","display","onMouseOver","loginFormShow","onMouseOut","loginFormHide","filterToolbarClose","filterToolbarShow","pointerEvents","filterChange","rootElement","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.60739d60.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/venus.19786740.glb\";","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as THREE from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport firebase from \"firebase\";\nimport $ from \"jquery\"\nimport Rodal from 'rodal';\nimport 'rodal/lib/rodal.css';\nimport './css/sample.css';\nimport scenedata from './models/venus.glb'\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\n\n\nvar recdirectory = '/privaterecs/'\n\n\nfunction hasTouch() {\n  return 'ontouchstart' in document.documentElement\n         || navigator.maxTouchPoints > 0\n         || navigator.msMaxTouchPoints > 0;\n}\n\nif (hasTouch()) { // remove all the :hover stylesheets\n  try { // prevent exception on browsers not supporting DOM styleSheets properly\n      for (var si in document.styleSheets) {\n          var styleSheet = document.styleSheets[si];\n          if (!styleSheet.rules) continue;\n\n          for (var ri = styleSheet.rules.length - 1; ri >= 0; ri--) {\n              if (!styleSheet.rules[ri].selectorText) continue;\n\n              if (styleSheet.rules[ri].selectorText.match(':hover')) {\n                  styleSheet.deleteRule(ri);\n              }\n          }\n      }\n  } catch (ex) {}\n}\n\n\n\n// Your web app's Firebase configuration\nvar firebaseConfig = {\n  apiKey: \"AIzaSyDiGzl-w4zQsJQG9c-7UsL0t9-CF9RnOUE\",\n  authDomain: \"recworld-abde0.firebaseapp.com\",\n  databaseURL: \"https://recworld-abde0.firebaseio.com\",\n  projectId: \"recworld-abde0\",\n  storageBucket: \"recworld-abde0.appspot.com\",\n  messagingSenderId: \"301870437630\",\n  appId: \"1:301870437630:web:c3eb9472d89f2ab1a101af\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nclass ThreeJS extends Component {\n  componentDidMount() {\n    // === THREE.JS CODE START ===\n    var rotationmodifier = 0.0001\n    var scene = new THREE.Scene();\n    var camera = new THREE.PerspectiveCamera(\n      50,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n\n\n   \n\n    var renderer = new THREE.WebGLRenderer({ alpha: true });\n    renderer.setClearColor(0xffffff, 0);\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMapSoft = true;\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(renderer.domElement);\n    var geometry = new THREE.PlaneGeometry(200, 200, 200);\n    var material = new THREE.ShadowMaterial({\n      color: 0x666666,\n      side: THREE.DoubleSide\n    });\n    material.opacity = 0.2;\n    var plane = new THREE.Mesh(geometry, material);\n    plane.position.z = -5;\n    plane.receiveShadow = true;\n    scene.add(plane);\n\n    camera.position.z = 7.5;\n    var loader = new GLTFLoader();\n\n    var spotLight = new THREE.SpotLight(0xf5f5f5);\n    spotLight.position.set(-0.5, -0.5, 10);\n    spotLight.intensity = 1;\n\n    spotLight.castShadow = true;\n\n    const shadowmapmultiplier = 3;\n\n    spotLight.shadow.mapSize.width = 1024 * 3;\n    spotLight.shadow.mapSize.height = 1024 * 3;\n\n    const d = 10;\n\n    spotLight.shadow.camera.left = -d;\n    spotLight.shadow.camera.right = d;\n    spotLight.shadow.camera.top = d;\n    spotLight.shadow.camera.bottom = -d;\n    spotLight.shadow.radius = 3;\n    scene.add(spotLight);\n\n    var light2 = new THREE.AmbientLight(0xf5f5f5); // soft white light\n    light2.intensity = 0.25;\n    scene.add(light2);\n    camera.add(light2)\n    //scene.environment = new THREE.Color( 0x00ff00)\n\n\n\n    var originalobjectsonlyyrotate = []\n    var originalobjectsfullrotate = []\n\n    var animatableobjectsfullrotate = []\n    var animatableobjectsonlyyrotate = []\n\n    loader.load(\n      scenedata,\n      function(gltf) {\n        console.log('loaded scene')\n        scene.add(gltf.scene);\n\n        scene.traverse (function (object) {\n\n          console.log(object.name)\n        })\n\n        gltf.scene.position.z = -1000\n\n        var cup = scene.getObjectByName(\n          \"cup\"\n        );\n        var chandelier = scene.getObjectByName(\"chandelier\")\n        var candelabra = scene.getObjectByName(\"Circle002\")\n        cup.castShadow = true;\n        chandelier.castShadow = true;\n        candelabra.castShadow = true;\n\n\n//chandelier.material = material\n//venus.material = material\n        //originalobjectsfullrotate.push(venus)\n        originalobjectsfullrotate.push(chandelier)\n        originalobjectsfullrotate.push(chandelier)\n        originalobjectsfullrotate.push(cup)\n        originalobjectsfullrotate.push(cup)\n        originalobjectsfullrotate.push(cup)\n        originalobjectsfullrotate.push(candelabra)\n        originalobjectsfullrotate.push(candelabra)\n        originalobjectsfullrotate.push(candelabra)\n        originalobjectsfullrotate.push(candelabra)\n        originalobjectsfullrotate.push(candelabra)\n\n       // animatableobjects.push(venus)\n      //  animatableobjects.push(chandelier)\n\n        var randompositions = [-3, -3.2, -3.1,3, 3.2, 3.1]\n        var randomypositions = [2, 3, 5]\n\n        var startingpositions = [-5, -7, -9, -11]\n\n        var window_focus = true;\n\nwindow.onblur = function() { window_focus = false; }\nwindow.onfocus = function() { window_focus = true; }\n        //venus.material = new THREE.MeshPhysicalMaterial()\n        startingpositions.forEach(function(yposition) {\n          if (window_focus ) {\n            var object = originalobjectsfullrotate[Math.floor(Math.random()*originalobjectsfullrotate.length)];\n    \n              var objectclone = object.clone()\n              scene.add(objectclone)\n              objectclone.position.x = randompositions[Math.floor(Math.random()*randompositions.length)] * (camera.aspect* 0.96)\n              objectclone.position.y =  yposition\n              animatableobjectsfullrotate.push(objectclone)\n          }\n        }\n        )\n\n\n\n      function createNewFullRotate() {\n    \n\n        function canAdd() {\n          if (animatableobjectsfullrotate.length > 0 ) {\n            if (animatableobjectsfullrotate.slice(-1)[0].position.y > -8) {\n              return true\n            } else {\n              return false\n            }\n          } else {\n            return true\n          }\n        } \n        if (window_focus && canAdd()) {\n        var object = originalobjectsfullrotate[Math.floor(Math.random()*originalobjectsfullrotate.length)];\n\n          var objectclone = object.clone()\n          scene.add(objectclone)\n          objectclone.position.x = randompositions[Math.floor(Math.random()*randompositions.length)] * (camera.aspect)\n          objectclone.position.y =  -8 - randomypositions[Math.floor(Math.random()*randomypositions.length)]\n          animatableobjectsfullrotate.push(objectclone)\n        }\n          setTimeout(createNewFullRotate, 3000);\n        \n      }\n      \n      createNewFullRotate();\n\n      var fullRotate = function() {\n          requestAnimationFrame(fullRotate);\n          //venus.rotation.z += 0.001;\n\n          animatableobjectsfullrotate.forEach(function(object) {\n            \n             object.rotation.y += 0.005 + (rotationmodifier * 0.01)\n             object.rotation.x += 0.001\n             object.position.y += 0.005\n             object.position.x += object.position.x/15000\n\n             if (object.position.y > 10 ) {\n               scene.remove(object)\n             }\n            })\n          renderer.render(scene, camera);\n        };\n        fullRotate();\n      },\n      undefined,\n      function(error) {\n        console.error(error);\n      }\n    );\n      var checkScrollSpeed = (function(settings){\n        settings = settings || {};\n    \n        var lastPos, newPos, timer, delta, \n            delay = settings.delay || 50; // in \"ms\" (higher means lower fidelity )\n    \n        function clear() {\n          lastPos = null;\n          delta = 0;\n        }\n    \n        clear();\n    \n        return function(){\n          newPos = window.scrollY;\n          if ( lastPos != null ){ // && newPos < maxScroll \n            delta = newPos -  lastPos;\n          }\n          lastPos = newPos;\n          clearTimeout(timer);\n          timer = setTimeout(clear, delay);\n          return delta;\n        };\n    })();\n    window.onscroll = function() {scrollCam()};\n\n    function scrollCam() {\n      var winScroll = document.body.scrollTop || document.documentElement.scrollTop;\n      var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;\n      var scrolled = (winScroll / height);\n      camera.position.y = 0 - (5 * scrolled)\n      spotLight.position.y = 0 - (5 * scrolled)\n      rotationmodifier = Math.abs(checkScrollSpeed())\n      //console.log (checkScrollSpeed())\n    }\n\n    var globalResizeTimer = null;\n\n    $(window).resize(function() {\n        if(globalResizeTimer != null) window.clearTimeout(globalResizeTimer);\n        globalResizeTimer = window.setTimeout(function() {\n         camera.aspect = window.innerWidth / window.innerHeight\n         camera.updateProjectionMatrix();\n\n         renderer.setSize( window.innerWidth, window.innerHeight );\n\n        }, 200);\n    });\n\n    var scrollStop = function (callback) {\n\n      // Make sure a valid callback was provided\n      if (!callback || typeof callback !== 'function') return;\n    \n      // Setup scrolling variable\n      var isScrolling;\n    \n      // Listen for scroll events\n      window.addEventListener('scroll', function (event) {\n    \n        // Clear our timeout throughout the scroll\n        window.clearTimeout(isScrolling);\n    \n        // Set a timeout to run after scrolling ends\n        isScrolling = setTimeout(function() {\n    \n          // Run the callback\n          callback();\n    \n        }, 66);\n    \n      }, false);\n    \n    };\n    scrollStop(function () {\n      rotationmodifier = 0;\n  });\n\n\n    // === THREE.JS EXAMPLE CODE END ===\n  }\n  render() {\n    return <div ref={ref => (this.mount = ref)}> </div>;\n  }\n}\n\n//// REG HTML BELOW\n\nvar fbdatabase = firebase.database()\n\n\nclass RecToolBar extends Component {\n  constructor() {\n    super();\n    this.state = {\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  handleChange(e) {\n\n  }\n\n  handleSubmit(e) {\n\n  }\n\n\n}\n\nvar mountcount = 0\n\nclass RecList extends Component {\n  constructor() {\n    super();\n    this.state = {\n      recs: [],\n      currenttitle: \"\"\n    }\n    this.updateRecs = this.updateRecs.bind(this);\n  }\n  updateRecs(recs) {\n    this.setState({\n      recs:recs\n    })\n  }\n  componentDidMount() {\n    mountcount += 1\n  }\n\n  removeRec(keyToRemove) {\n   var newarray = this.state.recs.filter(function(value, index, arr) { \n    return value['key'] !== keyToRemove \n    })\n   this.setState({\n     recs:newarray\n   })\n  }\n  \n\n  render() {\n\n    return (\n      <div className=\"reclist\">\n              {this.state.recs.map((rec) => {\n      return (\n        <RecUnit removeRec={this.removeRec.bind(this)} creator={rec.creator} currentuid={this.props.currentuid} currentusername={this.props.currentusername} index={rec.index} key={rec.key} fbid={rec.key} type={rec.type} title={rec.title} link={rec.link} description={rec.description}></RecUnit>\n        \n      )\n    })}\n     {this.state.recs.length === 0 && mountcount > 1 ? <div className=\"nothing\"><h1 >Nothing here</h1></div> : ''}\n </div> \n    )\n  }\n}\n\nvar formdata = {\"creator\":\"\",\"description\":\"\",\"rating\":0,\"title\":\"\",\"type\":\"\"}\nvar types = [\"movie\",\"tv show\",\"game\",\"location\",\"spiritual practice\"]\nvar typedict = {\"book\":\"local_library\",\"movie\":\"local_movies\", \"free pdf\": \"description\", \"show\": \"personal_video\", \"art moment\": \"ring_volume\",\"ambient sound\":\"hearing\",\"tweet\": \"subtitles\",\"day bev\": \"trending_up\", \"night bev\": \"trending_down\", \"song\": \"radio\", \"recipe\": \"rowing\" ,\"web vid\": \"memory\", \"fundraiser\": \"extension\" ,\"ritual\":\"brightness_2\" , \"spiritual practice\":\"bubble_chart\", \"furniture\": \"airline_seat_legroom_reduced\", \"spot\": \"terrain\", \"game\": \"healing\", \"personal sex act\":\"waves\", \"whitney h. single\":\"live_help\"}\n\nclass TypeButton extends Component {\n  render()  { return (\n    <div className=\"typebutton\">{this.props.type}</div>\n  )}\n}\n\nclass RadioButtons extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      selectedOption: ''\n    };\n  this.radioChange = this.radioChange.bind(this);\n}\n\n  radioChange(e) {\n    this.setState({\n      selectedOption: e.currentTarget.value\n    });\n  }\n  \n  render() {\n    return (\n      <div className=\"typeselector\">\n        {types.map(typeval => <div className=\"typeradio\"><input id={typeval} checked={this.state.selectedOption === typeval} type=\"radio\" key={typeval} value={typeval} onChange={this.radioChange}/><label for={typeval} class=\"radio\" className=\"button\">{typeval.toUpperCase()}</label></div>)} \n        </div> \n    );\n  }\n}\n\nfunction readdClass(el, classname) {\n  el.removeClass(classname)\n  var newone = el.clone(true);\n  el.before(newone);\n  el.remove()\n}\n\nclass RecUnit extends Component {\n  constructor() {\n    super();\n    this.state = {\n\n    }\n\n    this.like = this.like.bind(this)\n  }\n\n  like(e) {\n\n    if ($(e.target).hasClass('cardtitle')) {\n      return\n    }\n\n    if ($(e.target).hasClass('deleterecbutton')) {\n      return\n    }\n\n    const component = this\n   var element = e.currentTarget\n   $(element).removeClass('cardpressed')\n    void element.offsetWidth;\n    $(element).addClass('cardpressed')\n\n    readdClass($(element).find(\".iloveittext\"), 'iloveittext-pressed')\n    readdClass($(element).find(\".iloveittextbackground\"), 'iloveittextbackround-pressed')\n    var iloveittext = $(element).find(\".iloveittext\")\n    $(iloveittext).removeClass('iloveittext-pressed')\n    void iloveittext.offsetWidth;\n    $(iloveittext).addClass('iloveittext-pressed')\n\n    var iloveittextbackground = $(element).find(\".iloveittextbackground\")\n    $(iloveittextbackground).removeClass('iloveittextbackround-pressed')\n    void iloveittextbackground.offsetWidth;\n    $(iloveittextbackground).addClass('iloveittextbackround-pressed')\n\n    firebase.database().ref(recdirectory + this.props.fbid + '/rating').once('value').then(function(snapshot) {\n  \n      console.log(snapshot.val())\n      var rating = snapshot.val()\n\n      if (component.props.fbid) {\n\n        firebase.database().ref(recdirectory + component.props.fbid).update({'rating':rating + 1})\n\n      }\n\n    })\n\n    //$(element).find(\".iloveittext\").addClass('iloveittext-pressed')\n    //$(element).find(\".iloveittextbackground\").addClass('iloveittextbackround-pressed')\n\n  }\n\n  removeRec() {\n    var key = this.props.fbid\n    this.props.removeRec(key)\n   firebase.database().ref(recdirectory).child(key).remove()\n  }\n\n  render() {\n\n     const hrefattr = this.props.link ? {href:this.props.link} : {}\n\n    return (\n\n      <div className=\"card\" onClick={this.like}><div className=\"row\">\n      {this.props.currentusername && this.props.currentuid === this.props.creator ? <button onClick={this.removeRec.bind(this)} className=\"deleterecbutton\">delete</button>: ''}\n\n        <div className=\"col-sm-8\">\n        <h1 style={{color:'black'}}><a className=\"cardtitle\" {...hrefattr}>{this.props.title}</a></h1>\n        <h2 className=\"subtitle\"><span className=\"material-icons\">{typedict[this.props.type]}</span>{this.props.type}</h2></div>\n        </div>\n        \n<div className=\"row\">\n        <p>{this.props.description}</p></div>\n        <div className=\"iloveittext\">i love it!</div>\n        <div className=\"iloveittextbackground\"></div>\n        {(this.props.index ? <div className=\"indexwrapper\"><div className=\"indexdiv\">{this.props.index}</div></div>:<div></div> )}\n      </div>\n    );\n  }\n}\n\nclass Form extends Component {\n  constructor() {\n    super();\n    this.state = {\n      title: '',\n      link: '',\n      linkvalid: true,\n      type: '',\n      description: '',\n      buttonColor: \"lightgray\",\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.radioChange = this.radioChange.bind(this);\n    this.checkLink = this.checkLink.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n\n\n  }\n\n  radioChange(e) {\n    this.setState({\n      type: e.currentTarget.value\n    });\n  }\n\n  checkLink(e) {\n\n  }\n\n  handleChange(e) {\n\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n\n    if (e.target.name == \"link\" && e.target.value !== '') {\n      if (validate(e.target.value)) {\n        console.log(this.linkvalid)\n        this.setState({\n          linkvalid:true\n        });\n      } else {\n        this.setState({\n          linkvalid:false\n        });\n        console.log(this.linkvalid)\n      }\n    } else if (e.target.name == \"link\" && e.target.value === '') {\n      this.setState({\n        linkvalid:true\n      });\n    }\n\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n      const itemsRef = firebase.database().ref(recdirectory);\n      const item = {\n        title: this.state.title,\n        link: (this.state.linkvalid ? this.state.link : ''),\n        creator: firebase.auth().currentUser.uid,\n        rating: 0,\n        description: this.state.description,\n        type: this.state.type\n      }\n      itemsRef.push(item);\n      this.setState({\n        title: '',\n        link: '',\n        description:'',\n      type:''     \n     });\n    \n    this.props.addModalSuccess()\n  }\n\n  handleCancel(e) {\n    e.preventDefault();\n\n    this.setState({\n      title: '',\n      link: '',\n      description:'',\n    type:''     \n   });\n\n   this.props.addModalHide()\n\n  }\n\n  render() {\n    return (\n      <div>\n      <section className=\"add-item\">\n  <form>\n    <h2>NAME</h2>\n    <span><input type=\"text\" name=\"title\" placeholder=\"title\" onChange={this.handleChange} value={this.state.title} /></span>\n    <h2>LINK?    <span style={{ color: this.state.linkvalid ? 'white': 'lightgray'}}>   THIS LINK WON't WORK, but that's ok.</span></h2>\n    <input className=\"linkinput\"  type=\"text\" name=\"link\" placeholder=\"link\" onChange={this.handleChange} value={this.state.link} />\n    <div className=\"typeselector\">\n        {Object.keys(typedict).map(typeval => <div className=\"typeradio\"><input id={typeval} checked={this.state.type === typeval} type=\"radio\" key={typeval} value={typeval} onChange={this.radioChange.bind(this)}/><label for={typeval} class=\"radio\" className=\"button\"><span className='material-icons'>{typedict[typeval]}</span> {typeval.toUpperCase()}</label></div>)} \n        </div> \n        <h2>WHAT'S THE DEAL</h2>\n    <textarea name=\"description\" onChange={this.handleChange} value={this.state.description} />\n          <div className=\"modalbuttons\">\n      <button onClick={this.handleCancel} key=\"cancel button\" className=\"cancelbutton\">cancel</button>\n      <button onClick={this.handleSubmit} className={\"submitbutton \" + (this.state.title.trim() && this.state.type.trim() && this.state.description.trim() ? 'submitshake' : '')}>REC.</button></div>\n  </form>\n  \n</section> </div>\n    )\n  }\n}\n\nclass LoginForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      username: '',\n      password: '',\n      loginregtext:\"i'm new\",\n      errortext:\"\",\n      error: false,\n      usernameexists: false\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.handlePassword = this.handlePassword.bind(this);\n\n  }\n  handleChange(e) {\n    console.log('handling chnage')\n    var component = this\n\n    component.setState({\n      [e.target.name]: e.target.value,\n      errortext:''\n    }, function(){\n\n      firebase.database().ref('/users/').orderByChild('username').equalTo(this.state.username).once('value').then(function(snapshot) {\n        var children = []\n        snapshot.forEach(function(childSnapshot) {\n\n          var childData = childSnapshot.val();\n          console.log(childData)\n          children.push(childData)\n        });\n\n        if (children.length === 0) {\n          component.setState({\n            loginregtext:\"i'm new\",\n            usernameexists: false\n          })\n        } else {\n            component.setState({\n            loginregtext:'login',\n            usernameexists:true\n          })\n        }\n      });\n      \n      // firebase.auth().fetchSignInMethodsForEmail ( component.state.username + '@recworld.app' ).then(function(usercred) {\n      //   console.log(usercred)\n\n      //   if (usercred.length === 0 ) {\n      //     component.setState({\n      //       loginregtext:\"i'm new\"\n      //     })\n      //   } else {\n      //     component.setState({\n      //       loginregtext:'login',\n      //       usernameexists:true\n      //     })\n      //   }\n      \n      // })\n    });\n  }\n\n  handleRegisterLogin(e) {\n    var component = this\n    var enteredusername = this.state.username\n    var enteredpassword = this.state.password\n\n\n    //LOGIN\n    if (this.state.usernameexists) {\n      console.log('username does exist, loggin in' )\n\n      firebase.database().ref('/users/').orderByChild('username').equalTo(this.state.username).once('value').then(function(snapshot) {\n        console.log('checking username against database')\n        var key = ''    \n        snapshot.forEach(function(childSnapshot) {\n          console.log(childSnapshot.key)\n          console.log(childSnapshot.value)\n          key = childSnapshot.key;\n        });\n        console.log(key)\n  \n        firebase.auth().signInWithEmailAndPassword(key + \"@recworld.app\", enteredpassword).then(function(result) {\n          console.log('login success')\n          console.log(result)\n          component.props.signIn()\n          component.setState({\n            username: '',\n            password: '',\n            loginregtext:\"i'm new\",\n            errortext:\"\",\n            error: false,\n            usernameexists: false\n          })\n\n        }).catch(function(error) {\n          // Handle Errors here.\n          var errorCode = error.code;\n          var errorMessage = error.message;\n          component.setState({\n            errortext : errorMessage\n          })\n\n          // ...\n        });\n    })\n  } else {\n    //REGISTER\n    e.preventDefault();\n\n\n    firebase.auth().currentUser.updateProfile({\n      displayName: enteredusername\n    })\n\n    firebase.database().ref('users/' + firebase.auth().currentUser.uid).set({\n      'username': enteredusername\n      //some more user data\n    });\n\n    var credential = firebase.auth.EmailAuthProvider.credential(firebase.auth().currentUser.uid + \"@recworld.app\", enteredpassword);\n\n    firebase.auth().currentUser.linkWithCredential(credential).then(function(usercred) {\n    var user = usercred.user;\n    console.log(\"Anonymous account successfully upgraded\", user);\n    component.props.register(enteredusername)\n    component.setState({\n      username: '',\n      password: '',\n      loginregtext:\"i'm new\",\n      errortext:\"\",\n      error: false,\n      usernameexists: false\n    })\n  }).catch(function(error) {\n    component.setState({\n      errortext : error.message\n    })\n    console.log('enteredusername')\n    console.log(\"Error upgrading anonymous account\", error);\n  });\n\n  }\n}\n\n  handlePassword(e) {\n    this.setState({\n      [e.target.name]: e.target.value,\n      errortext:\"\"\n    })\n  }\n\nhandleCancel() {\n  this.setState({\n    username: '',\n    password: '',\n    loginregtext:\"i'm new\",\n    errortext:\"\",\n    error: false,\n    usernameexists: false\n  })\n\n  this.props.closeloginform()\n\n}\n\n  render() {\n    return(\n      <div className=\"loginform\">\n      <h2>username</h2>\n      <input type=\"text\" name=\"username\" onChange={this.handleChange} value={this.state.username} />\n      <h2>password</h2>\n      <input className=\"linkinput\" onChange={this.handlePassword} type=\"text\" name=\"password\" value={this.state.password} />\n     <h2><span> {this.state.errortext}</span></h2>\n\n      <div className=\"modalbuttons\">\n      <button onClick={this.handleCancel.bind(this)} key=\"cancel button\" className=\"cancelbutton\">cancel</button>\n      <button onClick={this.handleRegisterLogin.bind(this)} className={\"submitbutton \" + (this.state.username.trim() && this.state.password.trim() ? 'submitshake' : '')}>{this.state.loginregtext}</button></div>\n  </div>\n      )\n  }\n}\n\nclass MeToolbar extends Component {\n\n  constructor(props) {\n    super();\n    this.state = {\n      currentupdatemethod: 'mine',      \n    }\n    this.recList = React.createRef()\n  }\n\n\n  refreshMe() {\n    if (this.state.currentupdatemethod === 'mine') {\n      this.getMyRecs()\n    }\n  }\n\n  getMyRecs() {\n    var component = this\n\n    firebase.database().ref(recdirectory).orderByChild('creator').equalTo(this.props.currentuid).limitToLast(100).once('value').then(function(snapshot) {\n\n  \n      var reclist = []\n  \n      snapshot.forEach(function(childSnapshot) {\n        var childKey = childSnapshot.key;\n        console.log(childKey)\n        var childData = childSnapshot.val();\n        console.log(childData)\n        childData['key'] = childKey\n        reclist.push(childData)\n      });\n\n      component.recList.current.setState({recs:reclist})\n    })\n  }\n  \n  render() {return(\n    <div>\n    <div className=\"userpill\"><h1>{this.props.currentusername}</h1></div>\n    <div className=\"metoolbarbuttons\">\n    <button onClick={this.getMyRecs.bind(this)} className={\"myrecsbutton \" + (this.state.currentupdatemethod === 'mine' ? 'filterbuttonselected':'')}><span className=\"material-icons\">dynamic_feed</span>My recs</button>\n    <button onClick={this.props.signOut} className=\"logoutbutton\">logout</button></div>\n    <RecList currentuid={this.props.currentuid} currentusername={this.props.currentusername} ref={this.recList} />\n\n    </div>\n  )}\n}\n\n\n\nclass App extends Component {\n  constructor(props) {\n    super();\n    this.state = {\n      currentusername: \"\",\n      currentuid: \"\",\n      currentrecs: [],\n      rodaldialogstate:'',\n      rodalmaskstate:'',\n      filterset:'all',\n      currentupdatemethod: 'new',\n      filtertoolbaropen: false,\n      loginformopen: false,\n      loginbuttonvisible: false\n      \n    }\n    this.meToolbar = React.createRef()\n    this.recList = React.createRef()\n    this.getCurrentRecs = this.getCurrentRecs.bind(this)\n    this.getTrendingRecs = this.getTrendingRecs.bind(this)\n    this.addModalShow = this.addModalShow.bind(this)\n\n  }\n  componentDidMount() {\n    this.getCurrentRecs('all')\n\n    var component = this\n\n    \n\n  \n\n    firebase.auth().onAuthStateChanged(function(user) {\n      if (user) {\n        console.log('AUTH STATE CHANGED')\n        console.log(user)\n        var isAnonymous = user.isAnonymous;\n        var uid = user.uid;\n        var displayname = user.displayName\n\n        component.setState({\n          currentusername: displayname,\n          currentuid: uid\n        }, function(){\n          this.meToolbar.current.refreshMe()\n\n        })\n\n        // ...\n      } else {\n        // User is signed out.\n        // ...\n        firebase.auth().signInAnonymously().catch(function(error) {\n          // Handle Errors here.\n          var errorCode = error.code;\n          var errorMessage = error.message;\n          console.log(errorMessage)\n    \n        });\n      }\n      // ...\n    });\n  }\n\n  filterToolbarShow() {\n    this.setState({\n      filtertoolbaropen:true\n    })\n  }\n  filterToolbarClose() {\n    this.setState({\n      filtertoolbaropen:false\n    })\n  }\n\n  addModalShow() {\n    var el = $('.backgroundtext')\n    el.removeClass('flicker')\n    var newone = el.clone(true);\n    el.text(\"What's your rec?\")\n    el.before(newone);\n    el.remove()\n\n    this.setState({\n      rodaldialogstate:'rodal-appear',\n      rodalmaskstate:'rodalmask-appear'\n    })\n\n\n    $('.backgroundtext').text(\"What's your rec?\")\n    $('.backgroundtext').addClass('flicker')\n\n  }\n\n  addModalHide() {\n\n    this.setState({\n      rodaldialogstate:'rodal-cancel',\n      rodalmaskstate:'rodalmask-disappear'\n    })\n\n    // $('.rodal-mask').removeClass('rodalmask-appear')\n    // $('.rodal-mask').addClass('rodalmask-disappear')\n    // $('.rodal-dialog').removeClass('rodal-appear')\n    // $('.rodal-dialog').addClass('rodal-cancel')\n\n  }\n\n  addModalSuccess() {\n    var el = $('.backgroundtext')\n    el.removeClass('flicker')\n    var newone = el.clone(true);\n    el.text('Thank you!')\n    el.before(newone);\n    el.remove()\n\n\n    $('.backgroundtext').text('Thank you!')\n    $('.backgroundtext').addClass('flickeronce')\n\n    this.setState({\n      rodaldialogstate:'rodal-disappear',\n      rodalmaskstate:'rodalmask-disappear'\n    })\n\n    if (this.state.currentupdatemethod === 'me') {\n      this.meToolbar.current.refreshMe()\n    } else {\n      this.getCurrentRecs()\n    }\n    // $('.rodal-mask').removeClass('rodalmask-appear')\n    // $('.rodal-mask').addClass('rodalmask-disappear')\n    // $('.rodal-dialog').removeClass('rodal-appear')\n    // $('.rodal-dialog').addClass('rodal-disappear')\n\n  }\n\n  setButtonState(selectedbutton) {\n    $(\".toolbarbutton\").removeClass('selected')\n    $(selectedbutton).addClass('selected')\n  }\n\n  filterChange(e) {\n\n    var targetval = e.currentTarget.value\n\n    this.setState({\n      filtertoolbaropen:false,\n      filterset: targetval\n    }, function() {\n    \n        if (this.state.currentupdatemethod == 'new') {\n          this.getCurrentRecs()\n        } else if (this.state.currentupdatemethod == 'trending') {\n          this.getTrendingRecs()\n        }\n        this.setState({\n          filtertoolbaropen:false,\n        })\n    });\n  }\n\n  getTrendingRecs() {\n    this.setButtonState($(\".trendingbutton\"))\n    this.setState({\n      currentupdatemethod: 'trending'\n    })\n\n    var component = this \n    var filterset = component.state.filterset\n\n    if (filterset == 'all') {\n\n      firebase.database().ref(recdirectory).orderByChild('rating').limitToLast(100).once('value').then(function(snapshot) {\n        console.log(snapshot)\n    \n        var reclist = []\n    \n        snapshot.forEach(function(childSnapshot) {\n          var childKey = childSnapshot.key;\n          console.log(childKey)\n          var childData = childSnapshot.val();\n          console.log(childData)\n          childData['key'] = childKey\n\n          reclist.push(childData)\n        });\n\n        reclist.reverse()\n\n        var index = 1\n\n        reclist.forEach(function(rec){\n          rec['index'] = index \n          index +=1\n        })\n\n\n        component.recList.current.setState({recs:reclist})\n\n        $(\"html, body\").animate({\n          scrollTop: 0\n      }, 100);\n      })\n  } else {\n    firebase.database().ref(recdirectory).orderByChild('type').equalTo(filterset).limitToLast(100).once('value').then(function(snapshot) {\n\n  \n      var reclist = []\n  \n      snapshot.forEach(function(childSnapshot) {\n        var childKey = childSnapshot.key;\n        console.log(childKey)\n        var childData = childSnapshot.val();\n        console.log(childData)\n        childData['key'] = childKey\n        reclist.push(childData)\n      });\n\n      reclist.sort(function(first, second) {\n        return second['rating'] - first['rating'];\n      });      \n      console.log(reclist)\n\n      var index = 1\n\n      reclist.forEach(function(rec){\n        rec['index'] = index \n        index +=1\n      })\n\n\n      component.recList.current.setState({recs:reclist})\n\n      $(\"html, body\").animate({\n        scrollTop: 0\n    }, 100);\n    })\n  }\n  }\n  \n  getCurrentRecs() {\n\n    this.setButtonState($(\".newbutton\"))\n    var component = this \n\n    component.setState({\n      currentupdatemethod: 'new'\n    })\n\n    var filterset = component.state.filterset\n\n    if (filterset == 'all') {\n\n      firebase.database().ref(recdirectory).limitToLast(100).once('value').then(function(snapshot) {\n        console.log(snapshot)\n    \n        var reclist = []\n    \n        snapshot.forEach(function(childSnapshot) {\n          var childKey = childSnapshot.key;\n          console.log(childKey)\n          var childData = childSnapshot.val();\n          console.log(childData)\n          // ...\n          childData['key'] = childKey\n          reclist.push(childData)\n        });\n\n        reclist.reverse()\n        component.recList.current.setState({recs:reclist})\n\n        $(\"html, body\").animate({\n          scrollTop: 0\n      }, 100);\n      })\n    } else {\n\n      firebase.database().ref(recdirectory).orderByChild('type').equalTo(filterset).limitToLast(100).once('value').then(function(snapshot) {\n        console.log(snapshot)\n    \n        var reclist = []\n    \n        snapshot.forEach(function(childSnapshot) {\n          var childKey = childSnapshot.key;\n          console.log(childKey)\n          var childData = childSnapshot.val();\n          console.log(childData)\n          // ...\n          childData['key'] = childKey\n          reclist.push(childData)\n        });\n\n        reclist.reverse()\n        component.recList.current.setState({recs:reclist})\n\n        $(\"html, body\").animate({\n          scrollTop: 0\n      }, 100);\n      })\n\n    }\n  }\n\n  register(username) {\n    this.setState({\n      currentusername: username,\n      loginformopen:false\n    })\n    var el = $('.backgroundtext')\n    el.removeClass('flicker')\n    var newone = el.clone(true);\n    el.text(\"you're registered!\")\n    el.before(newone);\n    el.remove()\n\n\n    $('.backgroundtext').text(\"You're in!\")\n    $('.backgroundtext').addClass('flicker')\n    this.setState({\n      loginformopen: false\n    })\n  }\n  signIn() {\n\n    this.setState({\n      loginformopen: false\n    })\n    this.getMyRecs()\n    var el = $('.backgroundtext')\n    el.removeClass('flicker')\n    var newone = el.clone(true);\n    el.text('hello!')\n    el.before(newone);\n    el.remove()\n\n\n    $('.backgroundtext').text(\"Hello!\")\n    $('.backgroundtext').addClass('flicker')\n  }\n\n  signOut() {\n\n    var component = this \n    component.setState({\n      currentuid: '',\n      currentusername:'',\n      loginformopen:false\n    })\n\n    firebase.auth().signOut().then(function() {\n      component.setState({\n        currentuid: '',\n        currentusername:''\n      })\n  \n     \n    }).catch(function(error) {\n      // An error happened.\n    });\n\n    this.getCurrentRecs()\n\n    var el = $('.backgroundtext')\n    el.removeClass('flicker')\n    var newone = el.clone(true);\n    el.text('bye bye!')\n    el.before(newone);\n    el.remove()\n\n\n    $('.backgroundtext').text(\"bye bye!\")\n    $('.backgroundtext').addClass('flicker')\n  }\n\n  toggleFilterToobar() {\n    var toolbarval = !this.state.filtertoolbaropen\n    this.setState({\n      filtertoolbaropen: toolbarval\n    })\n  }\n\n  loginFormShow() {\n    this.setState({\n      loginformopen: true\n    })\n  }\n\n  loginFormHide() {\n    this.setState({\n      loginformopen: false\n    })\n  }\n\n  getMyRecs() {\n    this.setButtonState($(\".mebutton\"))\n    var component = this \n\n    component.setState({\n      currentupdatemethod: 'me'\n    })\n\n    this.meToolbar.current.refreshMe()\n\n  }\n\n  render() {\n\n    return(\n    <div>            <div className=\"backgroundtext\">WHAT'S YOUR REC?</div>\n    <div class=\"title\"><h1>REC WORLD</h1>\n        <div className=\"toolbar\">\n      <button className=\"toolbarbutton newbutton\" onClick={this.getCurrentRecs}><span className=\"material-icons\">line_weight</span>new</button>\n      <button className=\"toolbarbutton trendingbutton\" onClick={this.getTrendingRecs}><span className=\"material-icons\">equalizer</span>LOVED</button>\n      <button style={ {display : (this.state.currentusername ? '': 'none') }} className=\"toolbarbutton mebutton\" onClick={this.getMyRecs.bind(this)}><span className=\"material-icons\">grade</span>me</button>\n    <button style={ {display : (this.state.currentusername ? 'none': '') }} onMouseOver={this.loginFormShow.bind(this)} onMouseOut={this.loginFormHide.bind(this)} className={\"toolbarbutton loginbutton\"}  ><span className=\"material-icons\">grade</span>me</button>\n    <button onClick={this.filterToolbarClose.bind(this)}  onMouseOver={this.filterToolbarShow.bind(this)} onMouseOut={this.filterToolbarClose.bind(this)} className={\"toolbarbutton filterbutton \" + (this.state.filterset !== 'all' ? 'filterbuttonselected':'')}  ><span className=\"material-icons\">line_style</span>filter{this.state.filterset !== 'all' && window.innerWidth > 430 ? \": \" + this.state.filterset  : ''}</button>\n\n        </div>\n        <div style={ {pointerEvents : (this.state.currentusername ? 'none': 'all') }} onMouseOver={this.loginFormShow.bind(this)} onMouseOut={this.loginFormHide.bind(this)} className={\"filterselector \" + (this.state.loginformopen ? 'filterhover':'')} >\n         <LoginForm closeloginform={this.loginFormHide.bind(this)} register={this.register.bind(this)} signIn={this.signIn.bind(this)}/>\n          </div>\n\n    <div onMouseOver={this.filterToolbarShow.bind(this)} onMouseOut={this.filterToolbarClose.bind(this)} className={\"filterselector \" + (this.state.filtertoolbaropen ? 'filterhover':'')} >\n    <button value=\"all\" onClick={this.filterChange.bind(this)} className={(this.state.filterset === 'all' ? 'clearbuttonall':'')}>ALL</button>{Object.keys(typedict).map(typeval => <button className={(this.state.filterset === typeval ? 'clearbutton':'')} id={typeval+\"filterbutton\"} key={typeval + \"filterbutton\"} value={typeval} onClick={this.filterChange.bind(this)}><span className='material-icons'>{typedict[typeval]}</span> {typeval.toUpperCase()}</button>)} \n    <div className=\"filterbuffer\"></div>\n        </div>\n        </div>\n    \n    <div class=\"title hidden\"><h1>REC WORLD</h1></div>\n    <div className=\"title\">\n      <div className=\"container\">\n        \n      </div>\n    </div>\n    <div>\n      <div className=\"metoolbarparent\" style={ {display : (this.state.currentupdatemethod === 'me' ? '': 'none') }}>\n      <MeToolbar ref={this.meToolbar} signOut={this.signOut.bind(this)} currentuid={this.state.currentuid} currentusername={this.state.currentusername} />\n     </div>\n     <div className=\"mainreclistcontainer\" style={ {display : (this.state.currentupdatemethod === 'me' ? 'none': '') }}>\n     <RecList currentuid={this.state.currentuid} currentusername={this.state.currentusername} ref={this.recList} />  </div>\n      <div className=\"threejs\">\n        <ThreeJS />\n      </div>\n    </div>\n    <div className=\"addform\">\n    <div className={\"rodal-mask \" + this.state.rodalmaskstate} onClick={this.addModalHide.bind(this)}></div>\n    <div className={\"rodal-dialog \" + this.state.rodaldialogstate}>    \n      <Form addModalHide={this.addModalHide.bind(this)} addModalSuccess={this.addModalSuccess.bind(this)} getCurrentRecs={this.getCurrentRecs.bind(this)}/>\n\n</div>\n      \n</div>\n<button className=\"addbutton\" onClick={this.addModalShow}><div className=\"addbuttontext\">+</div></button>\n  </div>\n  )}\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n<App/>,\n  rootElement\n);\n\n\nfunction validate(url) {\n  var pattern = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n  if (pattern.test(url)) {\n    console.log('linkvalid')\n      return true;\n  } \n  console.log('link not valid')\n      return false;\n\n}"],"sourceRoot":""}